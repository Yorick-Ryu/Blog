---
title: 多叉树
index_img: /img/default.png
categories: 
  - DataStructure
date: 2022-08-03 20:41:08
tags: 
  - Java
  - 树
  - Tree
sticky: 
---

# 多路查找树
- [多路查找树](#多路查找树)
  - [二叉树与B树](#二叉树与b树)
    - [二叉树的问题分析](#二叉树的问题分析)
    - [多叉树的基本介绍](#多叉树的基本介绍)
    - [B树的基本介绍](#b树的基本介绍)
    - [2-3树基本介绍](#2-3树基本介绍)
    - [2-3树的构建思路](#2-3树的构建思路)
  - [B树、B+树和B\*树](#b树b树和b树)
    - [B树的介绍](#b树的介绍)
    - [B树的相关概念](#b树的相关概念)
    - [B+树的相关概念](#b树的相关概念-1)
    - [B\*树的相关概念](#b树的相关概念-2)

## 二叉树与B树

### 二叉树的问题分析

二叉树的操作效率较高，但是也存在问题。

二叉树需要加载到内存的，如果二叉树的节点少，没有什么问题，但是如果二叉树的节点很多（比如1亿），就存在如下问题：

问题1：在构建二叉树时，需要多次进行I/O操作（海量数据存在数据库或文件中），节点海量，构建二叉树时，会影响速度。

问题2：节点海量，也会造成二叉树的高度很大，降低操作速度。

### 多叉树的基本介绍

（1）在二叉树中，每个节点有数据项，最多有两个子节点。如果允许每个节点可以有更多的数据项和更多的子节点，就是多叉树(multiway tree)

（2）后面我们讲解的2-3树，2-3-4树就是多叉树，多叉树通过重新组织节点，减少树的高度，能对二叉树进行优化。

### B树的基本介绍

B树通过重新组织节点，降低树的高度，并且减少I/O读写次数来提升效率。

文件系统及数据库系统的设计者利用了磁盘预读原理，将一个节点的大小设为等于一个页（页得大小通常为4k），这样每个节点只需要一次I/O就可以完全载入。

将树的度M设置为1024，在600亿个元素中最多只需要4次I/O操作就可以读取到想要的元素，B树（B+树）广泛应用于文件存储系统以及数据库系统中。

### 2-3树基本介绍

2-3树是最简单的B树结构，具有如下特点：

（1）2-3树的所有叶子节点都在同一层。（只要是B树都满足这个条件）

（2）有两个子节点的节点叫二节点，二节点要么没有子节点，要么有两个子节点。

（3）有三个子节点的节点叫三节点，三节点要么没有子节点，要么有三个子节点。

（4）2-3树是由二节点和三节点构成的树。

### 2-3树的构建思路

插入规则：

（1）2-3树的所有叶子节点都在同一层。（只要是B树都满足这个条件）

（2）有两个子节点的节点叫二节点，二节点要么没有子节点，要么有两个子节点。

（3）有三个子节点的节点叫三节点，三节点要么没有子节点，要么有三个子节点。

（4）当按照规则插入一个数到某个节点时，不能满足上面三个要求，就需要拆，先向上拆，如果上层满，则拆本层，拆后仍然需要满足上面3个条件。

（5）对于三节点的子树的值大小仍然遵守二叉排序树(BST)的规则

[视频讲解](https://www.bilibili.com/video/BV1E4411H73v?p=143&t=400)

## B树、B+树和B*树

### B树的介绍

B-tree 即 B树，B 即 Balanced，平衡的意思。有人把B-tree翻译成B-树，容易让人产生误解。会以为B-树是一种树，而B树又是另一种树。实际上，B-tree就是指的B树。


### B树的相关概念

（1）B树的阶：节点的最多子节点个数。比如2-3树的阶是3，2-3-4树的阶是4。

（2）B树的搜索：根结点开始，对结点内的关键字（有序）序列进行二分查找，如果命中则结束，否则进入查询关键字所属范围的儿子结点；重复，直到所对应的儿子指针为空，或已经是叶子结点。

（3）关键字集合分布在整颗树中，即叶子节点和非叶子节点都存放数据。

（4）搜索有可能在非叶子结点结束。

（5）其搜索性能等价于在关键字全集内做一次二分查找。

### B+树的相关概念

（1）B+树的搜索与B树也基本相同，区别是B+树只有达到叶子结点才命中（B树可以在非叶子结点命中），其性能也等价于在关键字全集做一次二分查找。

（2）所有关键字都出现在叶子结点的链表中（即数据只能在叶子节点，也叫稠密索引)，且链表中的关键字（数据）恰好是有序的。

（3）不可能在非叶子结点命中

（4）非叶子结点相当于是叶子结点的索引（稀疏索引），叶子结点相当于是存储（关键字）数据的数据层。

（5）更适合文件索引系统。

（6）B权和B+树各有自己的应用场景，不能说B+树完全
比B树好，反之亦然。

可以理解为将一条单链表切割成若干个小单链表，从而提升查找速度。

[视频讲解](https://www.bilibili.com/video/BV1E4411H73v?p=144&t=518.7)

### B*树的相关概念

B*树是B+树的变体，在B+树的非根和非叶子结点再增加指向兄弟的指针。

（1）B*树定义了非叶子结点关键字个数至少为(2/3)*M度，即块的最低使用率为2/3，而B+树的块的最低使用率为B+树的1/2。

（2）从第1个特点我们可以看出，B*树分配新结点
的概率比B+树要低，空间使用率更高。
